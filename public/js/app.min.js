function PageConstructor(){this.errorElem=document.getElementById("error-block"),this.errorElem||(this.errorElem=document.createElement("div"),this.errorElem.id="error-block",document.body.appendChild(this.errorElem))}function TableConstructor(){this.tableContainer=document.getElementById("data-table"),this.tdClass="data-table__cell",this.tableContainer||(this.tableContainer=document.createElement("div"),this.tableContainer.id="data-table",document.body.appendChild(this.tableContainer))}function TableDeltasConstructor(){this.splashClass="data-table__cell--splash"}!function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=C.elements;return"string"==typeof e?e.split(" "):e}function a(e,t){var n=C.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),C.elements=n+" "+e,c(t)}function o(e){var t=v[e[b]];return t||(t={},g++,e[b]=g,v[g]=t),t}function i(e,n,r){if(n||(n=t),u)return n.createElement(e);r||(r=o(n));var a;return a=r.cache[e]?r.cache[e].cloneNode():p.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!a.canHaveChildren||f.test(e)||a.tagUrn?a:r.frag.appendChild(a)}function s(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||o(e);for(var a=n.frag.cloneNode(),i=0,s=r(),l=s.length;l>i;i++)a.createElement(s[i]);return a}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return C.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(C,t.frag)}function c(e){e||(e=t);var r=o(e);return!C.shivCSS||h||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||l(e,r),e}var h,u,d="3.7.3",m=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,b="_html5shiv",g=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",h="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){h=!0,u=!0}}();var C={elements:m.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:d,shivCSS:m.shivCSS!==!1,supportsUnknownElements:u,shivMethods:m.shivMethods!==!1,type:"default",shivDocument:c,createElement:i,createDocumentFragment:s,addElements:a};e.html5=C,c(t),"object"==typeof module&&module.exports&&(module.exports=C)}("undefined"!=typeof window?window:this,document),PageConstructor.prototype={init:function(e,t){fetch(e).then(function(e){return e.text()}.bind(this)).then(function(e){var t=new TableConstructor;t.init(e)}).then(fetch(t).then(function(e){return e.text()}.bind(this)).then(function(e){var t=new TableDeltasConstructor;t.init(e)})["catch"](function(e){this.errorDisplay(e)}.bind(this)))["catch"](function(e){this.errorDisplay(e)}.bind(this))},errorDisplay:function(e){this.errorElem.innerHTML="Error: "+e.message,this.errorElem.style.display="block"}},TableConstructor.prototype={dataTable:document.createElement("table"),init:function(e){return this.processingData(e)},processingData:function(e){for(var t=e.split(/\r\n|\n/),n=[],r=0,a=t.length;a>r;r++)if(""!==t[r]){for(var o=t[r].split(","),i=[],s=0;s<o.length;s++)i.push(o[s]);""!==i&&n.push(i)}return this.createTable(n),n},createTable:function(e){var t,n;for(t=0;t<e.length;t++){var r=this.dataTable.insertRow(-1),a=e[t];for(n=0;n<a.length;n++){var o=r.insertCell(-1);o.classList.add(this.tdClass),o.innerHTML=a[n]}}this.tableContainer.appendChild(this.dataTable)},getDataTable:function(){return this.dataTable}},TableDeltasConstructor.prototype=Object.create(TableConstructor.prototype),TableDeltasConstructor.prototype.createTable=function(e){var t=0,n=0,r=this.getDataTable();this.tableProcessing=function(){if(this.updateCells(t,n,e,r),t++,t<e.length)if(1==e[t].length&&""!==e[t][0]){var a=e[t];n=0,t++,setTimeout(this.tableProcessing.bind(this),a)}else n++,this.tableProcessing();else t=0,this.tableProcessing()},this.tableProcessing()},TableDeltasConstructor.prototype.updateCells=function(e,t,n,r){var a,o,i,s=r.rows;if(e<n.length){a=s[t+1],o=n[e];for(var l=0,c=o.length;c>l;l++)i=a.cells[l],i&&""!==o[l]&&(i.innerHTML=o[l],i.classList.add(this.splashClass),setTimeout(this.removeClassName(i,this.splashClass).bind(this),200))}},TableDeltasConstructor.prototype.removeClassName=function(e,t){return function(){e.classList.remove(t)}},window.onload=function(){var e=new PageConstructor;e.init("/snapshot","/deltas")};